//用户体验聚类分析
$(document).ready(function() {
    $.ajax({
        url: "IndexServlet",
        data: {
        },
        type: "POST",
        dataType:"json",
        success:function(data){
            var dom = document.getElementById("parallel");
            var myChart = echarts.init(dom);
            var app = {};

            var option;

            // Schema:
            var dataSZ = [
                //[[],[],[]]
                // [-100.4947185207449,
                //     121.62192601248499,
                //     515.6090532979072,
                //     1349.8004535474734,
                //     45.228908336012786,
                //     1.5514202667428951,
                //     0.0],
                // [-94.07580085671191,
                //     142.81473043433763,
                //     722.1071536031066,
                //     2351.263028869468,
                //     27.075925463549126,
                //     2.48614752286997,
                //     0.0],
                // [-68.99544191214419,
                //     158.0760238577401,
                //     255.74460983800697,
                //     363.3697367679859,
                //     26.242029380064793,
                //     1.9636461512641146,
                //     0.0],
                // [-82.12367611466699,
                //     154.22809904235515,
                //     525.4048865498447,
                //     2915.3230703353493,
                //     32.17008164285793,
                //     0.9422037003323397,
                //     2.0],
                // [-97.49217960711765,
                //     176.72052347168673,
                //     710.709725085168,
                //     5969.740937555467,
                //     15.873836126389346,
                //     2.153630394662656,
                //     1.0],
                // [-66.44043306247137,
                //     132.40754007776252,
                //     709.4245107862803,
                //     5379.273965538842,
                //     29.26697576919771,
                //     0.26937065138361693,
                //     1.0],
                // [-103.21448778929904,
                //     139.81211513450754,
                //     477.7782200112159,
                //     735.4033336726604,
                //     20.140847215631158,
                //     4.637225855113392,
                //     0.0],
                // [-75.8849902465907,
                //     197.42469266680084,
                //     266.11806922040716,
                //     1212.2900094202876,
                //     4.3109647577765475,
                //     0.40510125510591966,
                //     0.0],
                // [-78.06419074096696,
                //     167.3565649361275,
                //     722.5324789204274,
                //     3506.043486034565,
                //     18.71084040621751,
                //     1.1101524932803497,
                //     2.0],
                // [-104.2154558917835,
                //     121.83835810659225,
                //     613.4770470554818,
                //     2075.006217562899,
                //     39.81152019493362,
                //     4.399809386157839,
                //     0.0],
                // [-86.40501836268852,
                //     184.07735837958512,
                //     341.9510947751181,
                //     3428.1532071677148,
                //     17.614132824141016,
                //     0.4514585614999195,
                //     2.0],
                // [-98.86577373408694,
                //     175.03830275881512,
                //     725.2675216594731,
                //     6645.708776424582,
                //     10.84143685834854,
                //     4.093671119972251,
                //     1.0],
                // [-88.33220395561953,
                //     156.40617097011474,
                //     453.36537884107327,
                //     808.9575808241706,
                //     31.17071188166851,
                //     0.4262907131175092,
                //     0.0],
                // [-67.13181296377745,
                //     219.00354603533756,
                //     343.3552535926516,
                //     4447.493352678414,
                //     36.712529755453,
                //     2.87750259711953,
                //     2.0],
                // [-81.086671386299,
                //     131.29337726155427,
                //     417.6303898752325,
                //     2312.6704277552494,
                //     34.356347559688714,
                //     2.354458947056817,
                //     0.0],
                // [-104.5690609020993,
                //     145.98839387071018,
                //     686.2687627800544,
                //     6836.131795523877,
                //     25.02955180475656,
                //     4.478247176058072,
                //     1.0],
                // [-94.64408939604493,
                //     175.92216354337683,
                //     520.9252900253196,
                //     1645.020883212942,
                //     1.437601897175017,
                //     3.1121631148519526,
                //     0.0],
                // [-61.690337393640746,
                //     215.62826240965168,
                //     476.8036665821402,
                //     4302.422366927178,
                //     17.113536299416367,
                //     4.486156964144845,
                //     2.0],
                // [-90.29855005386392,
                //     157.8530483913731,
                //     616.8461030964695,
                //     2694.9974699822214,
                //     41.178240190163045,
                //     0.7170787117689414,
                //     2.0],
                // [-112.63422281144005,
                //     140.5097965319408,
                //     653.8170152691891,
                //     5197.858460328392,
                //     46.81932497561812,
                //     0.3653086348174278,
                //     1.0],
                // [-71.93413610256034,
                //     204.2823089964457,
                //     584.1640524079717,
                //     5747.925702206094,
                //     20.26163524798888,
                //     3.8783896414451675,
                //     1.0],
                // [-96.63166279097786,
                //     172.29442840633982,
                //     586.5446353457777,
                //     2917.639248497442,
                //     2.1082123025221886,
                //     2.6308922009861835,
                //     2.0],
                // [-103.3269540650852,
                //     145.83291204673355,
                //     275.96673589872915,
                //     6118.458003322439,
                //     21.561406000090383,
                //     0.2857620942458938,
                //     1.0],
                // [-61.90005738083725,
                //     155.54303837535733,
                //     309.23725998897413,
                //     2405.0734344432644,
                //     4.715204222161229,
                //     2.2653296494676587,
                //     0.0],
                // [-99.26105608522516,
                //     155.14763215872125,
                //     276.92674566001875,
                //     3477.9682627113443,
                //     32.61306408684871,
                //     2.7608630196722705,
                //     2.0],
                // [-94.68568601632691,
                //     128.62361965900436,
                //     740.2793095807434,
                //     6546.760569438218,
                //     29.141570649857655,
                //     1.556728198607067,
                //     1.0],
                // [-79.22380849714402,
                //     152.4234948377449,
                //     624.6094107242216,
                //     4417.703513428384,
                //     4.08750040928616,
                //     2.961431941743929,
                //     2.0],
                // [-67.32500304058989,
                //     182.36670694613608,
                //     372.9597292182207,
                //     5412.78725353049,
                //     29.464848008948756,
                //     0.37677376282817365,
                //     1.0],
                // [-66.7225775476905,
                //     184.77971295022195,
                //     679.5525245662283,
                //     11.375920226513237,
                //     40.4284810233428,
                //     1.0835815636906265,
                //     0.0],
                // [-95.57659965560669,
                //     159.6449934873403,
                //     664.864089886496,
                //     4978.176073931018,
                //     38.91018959536691,
                //     4.173965089645352,
                //     1.0],
                // [-98.13277430525335,
                //     136.59163123656296,
                //     488.84958411006636,
                //     1376.2596281893063,
                //     6.406029587723294,
                //     3.5987230050636745,
                //     0.0],
                // [-88.45384602425844,
                //     133.65079002546827,
                //     257.5220911561208,
                //     1593.742425783075,
                //     10.156249292491177,
                //     3.5484917830419658,
                //     0.0],
                // [-86.98526966311644,
                //     147.76182220218035,
                //     621.3561220979673,
                //     6319.800628467818,
                //     27.29241028328888,
                //     0.6834261129742936,
                //     1.0],
                // [-67.35540732737462,
                //     211.50977842853308,
                //     556.573016552725,
                //     5591.578479361182,
                //     17.551700589903984,
                //     0.26198888122618114,
                //     1.0],
                // [-86.18318117972129,
                //     218.76402382707676,
                //     353.2149320423934,
                //     5702.05356494715,
                //     37.835012264304204,
                //     0.9181922337621867,
                //     1.0],
                // [-103.66644891217004,
                //     134.55836465635184,
                //     661.8069160752888,
                //     1476.4495754940351,
                //     47.28668932910354,
                //     0.7859455794228865,
                //     0.0],
                // [-89.56879829732321,
                //     173.21620188886055,
                //     308.24894275789075,
                //     4008.0555855394646,
                //     6.202566788077274,
                //     1.4863228707264076,
                //     2.0],
                // [-88.68792416453077,
                //     122.2866498993125,
                //     595.4530596795066,
                //     3452.6707137171934,
                //     33.2065692519764,
                //     3.4694446570687747,
                //     2.0],
                // [-75.85045999647316,
                //     159.88925582262846,
                //     680.981350289951,
                //     2686.6955445538374,
                //     2.611721231063635,
                //     4.200448000276504,
                //     2.0],
                // [-67.38199756265121,
                //     214.21580577537225,
                //     250.47409264394238,
                //     5682.962983277069,
                //     25.36015311790648,
                //     4.446751545181952,
                //     1.0],
                // [-67.43102521019786,
                //     177.42695514991212,
                //     412.1752675915013,
                //     3507.442154000884,
                //     34.07035075868997,
                //     2.752841834204833,
                //     2.0],
                // [-106.35783763852439,
                //     196.4571621063159,
                //     685.1485248156025,
                //     6683.913490670355,
                //     41.013722650471614,
                //     2.950463285566836,
                //     1.0],
                // [-74.12429526287082,
                //     197.22464695349663,
                //     390.0244925065158,
                //     5030.282092922869,
                //     16.34879640783274,
                //     1.0900671598191551,
                //     1.0],
                // [-112.0574196283878,
                //     167.8755344442716,
                //     463.6426761014567,
                //     5938.156620348009,
                //     37.226004782056556,
                //     4.1172528140433595,
                //     1.0],
                // [-96.4093338323413,
                //     122.18749877929825,
                //     676.4113789990793,
                //     5944.053484966488,
                //     36.99979771230988,
                //     4.64620481879168,
                //     1.0],
                // [-75.2370694390565,
                //     209.02885069691587,
                //     612.3311485370598,
                //     5894.469274865037,
                //     17.688936680757855,
                //     1.9452040853735642,
                //     1.0],
                // [-71.87508381396555,
                //     187.30762478077776,
                //     315.52092584283065,
                //     4945.707713043737,
                //     36.369468328130864,
                //     0.06945968258709856,
                //     1.0],
                // [-109.05929580560726,
                //     176.84110406085574,
                //     268.09497440543095,
                //     4439.513521330998,
                //     0.3150479514691773,
                //     0.27615506769139264,
                //     2.0],
                // [-66.3888157400568,
                //     184.53069070652055,
                //     494.0873436679,
                //     6507.404721148238,
                //     45.99441431092827,
                //     0.6677161194289877,
                //     1.0],
                // [-66.03319314530046,
                //     188.86841806739997,
                //     628.8264439439275,
                //     6189.743459762938,
                //     37.903932017663614,
                //     2.7280045799390806,
                //     1.0]

            ];



            var schema = [
                { name: 'rssi', index: 0, text: 'rssi' },
                { name: 'downlinkSpeed', index: 1, text: 'downlinkSpeed' },
                { name: 'latency', index: 2, text: 'latency' },
                { name: 'downSpeed', index: 3, text: 'downSpeed' },
                { name: 'upSpeed', index: 4, text: ' upSpeed' },
                { name: 'txDiscardRatio', index: 5, text: 'txDiscardRatio' },
                { name: '体验', index: 6, text: '簇' }
            ];

            var lineStyle = {
                normal: {
                    width: 1.2,
                    opacity: 0.7
                }
            };

            option = {
                backgroundColor: '#fff',
                legend: {
                    bottom: 30,
                    data: ['深圳'],
                    itemGap: 20,
                    textStyle: {
                        color: '#fff555',
                        fontSize: 14
                    }
                },
                tooltip: {
                    padding: 10,
                    backgroundColor: '#222',
                    borderColor: '#777',
                    borderWidth: 1
                },

                parallelAxis: [
                    { dim: 0, name: schema[0].text, inverse: true, max: 31, nameLocation: 'start' },
                    { dim: 1, name: schema[1].text },
                    { dim: 2, name: schema[2].text },
                    { dim: 3, name: schema[3].text },
                    { dim: 4, name: schema[4].text },
                    { dim: 5, name: schema[5].text },
                    {
                        dim: 6, name: schema[6].text,
                        type: 'category', data: ['簇1', '簇2', '簇3']
                    }
                ],

                visualMap: {
                    show: false,
                    min: 0,
                    max: 7000,
                    dimension: 3,
                    inRange: {
                        color: ['#d94e5d', '#eac736', '#50a3ba'].reverse(),
                        colorAlpha: [0.5, 1]
                    }
                },
                parallel: {
                    left: '5%',
                    right: '18%',
                    bottom: 100,
                    parallelAxisDefault: {
                        type: 'value',
                        name: 'rssi',
                        nameLocation: 'end',
                        nameGap: 20,
                        nameTextStyle: {
                            color: '#333',
                            fontSize: 12
                        },
                        axisLine: {
                            lineStyle: {
                                color: '#aaa'
                            }
                        },
                        axisTick: {
                            lineStyle: {
                                color: '#777'
                            }
                        },
                        splitLine: {
                            show: false
                        },
                        axisLabel: {
                            color: '#999'
                        }
                    }
                },
                series: [
                    {
                        name: '单个用户',
                        type: 'parallel',
                        lineStyle: lineStyle,
                        data: dataSZ
                    },

                ]
            };

            if (option && typeof option === 'object') {
                myChart.setOption(option);
            }


        }

    });
});
